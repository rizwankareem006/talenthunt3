{% extends 'Details/base.html' %}
{% load static %}
{% load details_tags %}
{% block title %}Talent Hunt | {{tp.teamname}}{% endblock %}
{% block header %}
    <style>
        body {
            margin-top: auto;
            background-color: #f1f1f1;
        }
  
        .border{
            border-bottom:1px solid #F1F1F1;
            margin-bottom:10px;
        }
        
        .image-section{
            padding: 0px;
        }
        
        .image-section img{
            width: 100%;
            height:250px;
            position: relative;
        }
        .user-image{
            position: absolute;
            margin-top:-50px;
        }
        .user-left-part{
            margin: 0px;
            width: 100%;
        }
        .user-image img{
            width:100px;
            height:100px;
        }
        .user-profil-part{
            padding-bottom:30px;
            background-color:#f1f1f1;
        }

        .follow{    
            margin-top:70px;   
        }

        .user-detail-row{
            margin:0px; 
        }
        
        .user-detail-section2 p{
            font-size:12px;
            padding: 0px;
            margin: 0px;
        }
        
        .user-detail-section2{
            margin-top:10px;
        }
        
        .user-detail-section2 span{
            color:#7CBBC3;
            font-size: 20px;
        }
        
        .user-detail-section2 small{
            font-size:12px;
            color:#D3A86A;
        }
        
        .profile-right-section{
            padding: 20px 0px 10px 15px;
            background-color: #f1f1f1;  
        }
        
        .profile-right-section-row{
            margin: 0px;
        }
        
        .profile-header-section1 h1{
            font-size: 25px;
            margin: 0px;
        }
        
        .profile-header-section1 h5{
            color: #0062cc;
        }
        
        .req-btn{
            height:30px;
            font-size:12px;
        }
        
        .profile-tag{
            padding: 10px;
            border:1px solid #f1f1f1;
        }
        
        .profile-tag p{
            font-size: 12px;
            color:black;
        }
        
        .profile-tag i{
            color:#ADADAD;
            font-size: 20px;
        }
        
        .nav-link{
            font-size: 1.2em;    
        }

        #icon {
            color: rgb(46, 46, 46);     
        }

        .list-group-item {
            background-color: #f1f1f1; 
            border: none;
        }
    </style>
{% endblock %}
{% block content %}
<div class="col-md-12 col-sm-12 col-xs-12 image-section">
    <img src="{% static 'Registration\Images\Profilebg3.jpg' %}" alt="pro-bg">
</div>
    <div class="container main-section">
        <div class="row">
            <div class="row user-left-part">
                <div class="col-md-3 col-sm-3 col-xs-12 user-profil-part pull-left">
                    <div class="row ">
                        <div class="col-md-12 col-md-12-sm-12 col-xs-12 user-image text-center">
                            <img src="{% static 'Registration\Images\teamprofile1.png' %}" class="rounded-circle" alt="profile-img" style="width: 160px; height: 160px;">
                        </div>
                        <div class="col-md-12 col-sm-12 col-xs-12 user-detail-section1 text-center">
                            <br><br><br><br><br>
                            <h2>{{tp.teamname}}</h2>
                            <p>
                                <svg id="icon" width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chat-right-quote-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M16 2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h9.586a1 1 0 0 1 .707.293l2.853 2.853a.5.5 0 0 0 .854-.353V2zM7.194 4.766c.087.124.163.26.227.401.428.948.393 2.377-.942 3.706a.446.446 0 0 1-.612.01.405.405 0 0 1-.011-.59c.419-.416.672-.831.809-1.22-.269.165-.588.26-.93.26C4.775 7.333 4 6.587 4 5.667 4 4.747 4.776 4 5.734 4c.271 0 .528.06.756.166l.008.004c.169.07.327.182.469.324.085.083.161.174.227.272zM11 7.073c-.269.165-.588.26-.93.26-.958 0-1.735-.746-1.735-1.666 0-.92.777-1.667 1.734-1.667.271 0 .528.06.756.166l.008.004c.17.07.327.182.469.324.085.083.161.174.227.272.087.124.164.26.228.401.428.948.392 2.377-.942 3.706a.446.446 0 0 1-.613.01.405.405 0 0 1-.011-.59c.42-.416.672-.831.81-1.22z"/>
                                </svg>
                                {{tp.teammotive}}
                                <br>
                                {% if message %}
                                    <h3>{{message}}</h3>
                                {% endif %}
                            </p>
                            {% if owner %}
                                <div class = "dropdown">
                                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                        Request
                                    </button>
                                    <div class="dropdown-menu">
                                        {% for item in reqs.requests %}
                                            <span class="dropdown-item">
                                                <a href ="{% url 'Details:Profile' username=reqs.usernames|index:forloop.counter0 %}">{{item}}</a>
                                                <form action="{% url 'Details:TeamAcceptRequest' team=tp.primary_key user=reqs.usernames|index:forloop.counter0 %}" method="POST">
                                                {% csrf_token %}
                                                <button class="btn btn-success">
                                                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/>
                                                    </svg>
                                                </button>
                                                </form>
                                                <form action="{% url 'Details:TeamDeclineRequest' team=tp.primary_key user=reqs.usernames|index:forloop.counter0 %}" method="POST">
                                                {% csrf_token %}
                                                <button class="btn btn-danger">
                                                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                                                    </svg>
                                                </button>
                                                </form>
                                            </span>
                                            <div class="dropdown-divider"></div>
                                        {% endfor %}
                                    </div>
                                </div>
                            {% else %}
                                <form action="{% url 'Details:TeamSendRequest' team=tp.primary_key %}" method="POST">
                                    {% csrf_token %}
                                    <button class="btn btn-primary" {% if reqsent %} disabled {% endif %}>Send Request</button>
                                </form>
                            {% endif %}  
                            <br>
                            {% if owner %}
                                <form action="{% url 'Details:Resign' team=tp.primary_key user=request.user %}" method="POST">
                                    {% csrf_token %}
                                    <button class="btn btn-danger">Resign</button>
                                </form>
                            {% endif %}                      
                        </div>
                    </div>
                </div>
                <div class="col-md-9 col-sm-9 col-xs-12 pull-right profile-right-section">
                    {% csrf_token %}
                    <div class="row profile-right-section-row">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-8">
                                    <ul class="nav nav-tabs" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" href="#details" role="tab" data-toggle="tab"><i class="fas fa-user-circle"></i>Details</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#members" role="tab" data-toggle="tab"><i class="fas fa-team-circle"></i>Team Mates</a>
                                        </li>                                                
                                    </ul>
                                    <br>
                                    <div class="tab-content">
                                        <div role="tabpanel" class="tab-pane fade show active" id="details">
                                            <form action="{% url 'Details:TeamProfile' team=tp.primary_key %}" method="POST">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Team Description</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><textarea id="teamdescription" name="teamdescription" {% if not owner %}disabled{% endif %} required>{{tp.teamdescription}}</textarea></p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Team Motive</label>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <p><textarea id="teammotive" name="teammotive" {% if not owner %}disabled{% endif %} required>{{tp.teammotive}}</textarea></p>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div role="tabpanel" class="tab-pane fade" id="members">
                                            {% csrf_token %}
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <ul list-group list-group-flush>
                                                        {% for item in pd.fullnames %}
                                                        <li class="list-group-item">
                                                            <a href="{% url 'Details:Profile' username=pd.usernames|index:forloop.counter0 %}">{{item}}</a>
                                                            {% if owner %}
                                                            <form action="{% url 'Details:TeamMemberSuccess' team=tp.primary_key user=pd.usernames|index:forloop.counter0 %}" method="POST">
                                                                {% csrf_token %}
                                                                <button class="btn btn-success">
                                                                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                        <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/>
                                                                    </svg>
                                                                </button>
                                                            </form>
                                                            <form action="{% url 'Details:TeamMemberFailure' team=tp.primary_key user=pd.usernames|index:forloop.counter0 %}" method="POST">
                                                                {% csrf_token %}
                                                                <button class="btn btn-danger">
                                                                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                        <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                                                                    </svg>
                                                                </button>
                                                            </form>
                                                            {% endif %}
                                                        </li>
                                                        {% endfor %}
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            {% if owner == True %}
                                                <button class="btn-dark btn-lg" type="button" id="update">Update</button>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}